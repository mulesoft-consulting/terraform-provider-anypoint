---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "anypoint_cloudhub2_shared_space_deployment Resource - terraform-provider-anypoint"
subcategory: ""
description: |-
  Creates and manages a `deployment` of a mule app on Cloudhub v2 Shared-Space only.
---

# anypoint_cloudhub2_shared_space_deployment (Resource)

Creates and manages a `deployment` of a mule app on Cloudhub v2 Shared-Space only.

## Example Usage

```terraform
resource "anypoint_cloudhub2_shared_space_deployment" "deployment" {
  org_id = var.root_org
  env_id = var.env_id
  name   = "your-awesome-app"
  application {
    desired_state = "STARTED"
    vcores = 0.1
    object_store_v2_enabled = true
    ref {
      group_id    = var.root_org
      artifact_id = "your-awesome-app-artifact"
      version     = "1.0.0"
      packaging   = "jar"
    }
    configuration {
      mule_agent_app_props_service {
        properties = {
          props1 = "value"
          props2 = "value"
        }
        secure_properties = {
          secure_props1 = "secret_value"
        }
      }
      mule_agent_logging_service {
        scope_logging_configurations {
          scope     = "mule.package"
          log_level = "DEBUG"
        }
      }
    }
  }

  target {
    provider = "MC"
    target_id = "cloudhub-us-east-1"
    replicas = 1
    deployment_settings {
      clustered = false
      jvm_args = ""
      update_strategy = "rolling"
      disable_am_log_forwarding = true
      disable_external_log_forwarding = true
      generate_default_public_url = true
      runtime {
        version = "4.7.0:20e-java8"
      }
      http {
        inbound_last_mile_security = true
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `application` (Block List, Min: 1, Max: 1) The details of the application to deploy (see [below for nested schema](#nestedblock--application))
- `env_id` (String) The environment where mule app is deployed.
- `name` (String) The name of the deployed mule app.
- `org_id` (String) The organization where the mule app is deployed.
- `target` (Block List, Min: 1, Max: 1) The details of the target to perform the deployment on. (see [below for nested schema](#nestedblock--target))

### Read-Only

- `creation_date` (Number) The creation date of the mule app.
- `desired_version` (String) The deployment desired version of the mule app.
- `id` (String) The unique id of the mule app deployment in the platform.
- `last_modified_date` (Number) The last modification date of the mule app.
- `last_successful_version` (String) The last successfully deployed version
- `replicas` (List of Object) Data of the mule app replicas (see [below for nested schema](#nestedatt--replicas))
- `status` (String) Data of the mule app replicas

<a id="nestedblock--application"></a>
### Nested Schema for `application`

Required:

- `configuration` (Block List, Min: 1, Max: 1) The configuration of the application. (see [below for nested schema](#nestedblock--application--configuration))
- `ref` (Block List, Min: 1, Max: 1) The reference to the artifact on Exchange that is to be deployed on Cloudhub 2.0.
			Please ensure the application's artifact is deployed on Exchange before using this resource on Cloudhub 2.0. (see [below for nested schema](#nestedblock--application--ref))
- `vcores` (Number) The allocated virtual cores. Acceptable Values are: 0.1 / 0.2 / 0.5 / 1 / 1.5 / 2 / 2.5 / 3 / 3.5 / 4

Optional:

- `desired_state` (String) The desired state of the application.
- `object_store_v2_enabled` (Boolean) Whether object store v2 is enabled.

Read-Only:

- `status` (String) The status of the application.

<a id="nestedblock--application--configuration"></a>
### Nested Schema for `application.configuration`

Required:

- `mule_agent_app_props_service` (Block List, Min: 1, Max: 1) The mule app properties (see [below for nested schema](#nestedblock--application--configuration--mule_agent_app_props_service))

Optional:

- `mule_agent_logging_service` (Block List, Max: 1) The mule app logging props (see [below for nested schema](#nestedblock--application--configuration--mule_agent_logging_service))

Read-Only:

- `mule_agent_scheduling_service` (List of Object) The mule app scheduling (see [below for nested schema](#nestedatt--application--configuration--mule_agent_scheduling_service))

<a id="nestedblock--application--configuration--mule_agent_app_props_service"></a>
### Nested Schema for `application.configuration.mule_agent_app_props_service`

Optional:

- `properties` (Map of String) The mule application properties.
- `secure_properties` (Map of String) The mule application secured properties.

Read-Only:

- `application_name` (String) The application name


<a id="nestedblock--application--configuration--mule_agent_logging_service"></a>
### Nested Schema for `application.configuration.mule_agent_logging_service`

Optional:

- `scope_logging_configurations` (Block List) Additional log levels and categories to include in logs. (see [below for nested schema](#nestedblock--application--configuration--mule_agent_logging_service--scope_logging_configurations))

Read-Only:

- `artifact_name` (String) The application name.

<a id="nestedblock--application--configuration--mule_agent_logging_service--scope_logging_configurations"></a>
### Nested Schema for `application.configuration.mule_agent_logging_service.scope_logging_configurations`

Required:

- `log_level` (String) The application log level: INFO / DEBUG / WARNING / ERROR / FATAL
- `scope` (String) The logging package scope



<a id="nestedatt--application--configuration--mule_agent_scheduling_service"></a>
### Nested Schema for `application.configuration.mule_agent_scheduling_service`

Read-Only:

- `application_name` (String)
- `schedulers` (List of Object) (see [below for nested schema](#nestedobjatt--application--configuration--mule_agent_scheduling_service--schedulers))

<a id="nestedobjatt--application--configuration--mule_agent_scheduling_service--schedulers"></a>
### Nested Schema for `application.configuration.mule_agent_scheduling_service.schedulers`

Read-Only:

- `enabled` (Boolean)
- `expression` (String)
- `flow_name` (String)
- `frequency` (String)
- `name` (String)
- `start_delay` (String)
- `time_unit` (String)
- `time_zone` (String)
- `type` (String)




<a id="nestedblock--application--ref"></a>
### Nested Schema for `application.ref`

Required:

- `artifact_id` (String) The artifactId of the application.
- `group_id` (String) The groupId of the application.
- `packaging` (String) The packaging of the application. Only 'jar' is supported.
- `version` (String) The version of the application.



<a id="nestedblock--target"></a>
### Nested Schema for `target`

Required:

- `deployment_settings` (Block List, Min: 1, Max: 1) The settings of the target for the deployment to perform. (see [below for nested schema](#nestedblock--target--deployment_settings))
- `target_id` (String) The unique identifier of the target within Cloudhub 2.0.
			Checkout the [documentation](https://docs.mulesoft.com/cloudhub-2/ch2-architecture#regions-and-dns-records) for more info

Optional:

- `provider` (String) The cloud provider the target belongs to.
- `replicas` (Number) The number of replicas. Default is 1.

<a id="nestedblock--target--deployment_settings"></a>
### Nested Schema for `target.deployment_settings`

Optional:

- `autoscaling` (Block List, Max: 1) Use this object to provide CPU Based Horizontal Autoscaling configuration on deployment and redeployment operations. This object is optional.
			If Autoscaling is disabled and the fields "minReplicas" and "maxReplicas" are provided, they must match the value of "target.replicas" field.
			Learn more about Autoscaling [here](https://docs.mulesoft.com/cloudhub-2/ch2-configure-horizontal-autoscaling). (see [below for nested schema](#nestedblock--target--deployment_settings--autoscaling))
- `clustered` (Boolean) Whether the application is deployed in clustered mode.
- `disable_am_log_forwarding` (Boolean) Whether log forwarding is disabled.
- `disable_external_log_forwarding` (Boolean) Whether the log forwarding is disabled.
- `generate_default_public_url` (Boolean) Whether default public url should be generated.
- `http` (Block List, Max: 1) The details about http inbound or outbound configuration (see [below for nested schema](#nestedblock--target--deployment_settings--http))
- `jvm_args` (String) The java virtual machine arguments
- `runtime` (Block List, Max: 1) The Mule app runtime version info. (see [below for nested schema](#nestedblock--target--deployment_settings--runtime))
- `update_strategy` (String) The mule app deployment update strategy: rolling or recreate

Read-Only:

- `anypoint_monitoring_scope` (String) The anypoint moniroting scope
- `persistent_object_store` (Boolean) Whether persistent object store is enabled. Only for RTF
- `resources` (List of Object) The mule app allocated resources (see [below for nested schema](#nestedatt--target--deployment_settings--resources))
- `sidecars` (List of Object) The mule app sidecars. (see [below for nested schema](#nestedatt--target--deployment_settings--sidecars))
- `tracing_enabled` (Boolean) Whether the log tracing is enabled.

<a id="nestedblock--target--deployment_settings--autoscaling"></a>
### Nested Schema for `target.deployment_settings.autoscaling`

Required:

- `enabled` (Boolean) Enables or disables the Autoscaling feature. The possible values are: true or false.

Optional:

- `max_replicas` (Number) Set the maximum amount of replicas your application can scale to. The minimum accepted value is 2. The maximum is 32.
- `min_replicas` (Number) Set the minimum amount of replicas for your deployment. The minimum accepted value is 1. The maximum is 3.


<a id="nestedblock--target--deployment_settings--http"></a>
### Nested Schema for `target.deployment_settings.http`

Optional:

- `inbound_last_mile_security` (Boolean) Last-mile security means that the connection between ingress and the actual Mule app will be HTTPS.

Read-Only:

- `inbound_forward_ssl_session` (Boolean) Whether to forward the ssl session. This option is disabled for shared-space.
- `inbound_internal_url` (String) The inbound internal url.
- `inbound_path_rewrite` (String) The inbound path rewrite. This option is disabled for shared-space.
- `inbound_public_url` (String) The inbound public url. Setting the public url is disabled for shared-space.
- `inbound_unique_id` (String) The inbound unique id.


<a id="nestedblock--target--deployment_settings--runtime"></a>
### Nested Schema for `target.deployment_settings.runtime`

Required:

- `version` (String) On deployment operations it can be set to:
				- a full image version with tag (i.e "4.6.0:40e-java17"),
				- a base version with a partial tag not indicating the java version (i.e. "4.6.0:40")
				- or only a base version (i.e. "4.6.0").
			Defaults to the latest image version.
			This field has precedence over the legacy 'target.deploymentSettings.runtimeVersion'.
			Learn more about Mule runtime release notes [here](https://docs.mulesoft.com/release-notes/runtime-fabric/runtime-fabric-runtimes-release-notes)

Optional:

- `java` (String) On deployment operations it can be set to one of:
				- "8"
				- "17"
			Defaults to "8".
			Learn more about Java support [here](https://docs.mulesoft.com/general/java-support).
- `release_channel` (String) On deployment operations it can be set to one of:
				- "LTS"
				- "EDGE"
				- "LEGACY".
			Defaults to "EDGE". This field has precedence over the legacy 'target.deploymentSettings.runtimeReleaseChannel'.
			Learn more on release channels [here](https://docs.mulesoft.com/release-notes/mule-runtime/lts-edge-release-cadence).


<a id="nestedatt--target--deployment_settings--resources"></a>
### Nested Schema for `target.deployment_settings.resources`

Read-Only:

- `cpu_limit` (String)
- `cpu_reserved` (String)
- `memory_limit` (String)
- `memory_reserved` (String)
- `storage_limit` (String)
- `storage_reserved` (String)


<a id="nestedatt--target--deployment_settings--sidecars"></a>
### Nested Schema for `target.deployment_settings.sidecars`

Read-Only:

- `anypoint_monitoring_image` (String)
- `anypoint_monitoring_resources_cpu_limit` (String)
- `anypoint_monitoring_resources_cpu_reserved` (String)
- `anypoint_monitoring_resources_memory_limit` (String)
- `anypoint_monitoring_resources_memory_reserved` (String)




<a id="nestedatt--replicas"></a>
### Nested Schema for `replicas`

Read-Only:

- `current_deployment_version` (String)
- `deployment_location` (String)
- `id` (String)
- `reason` (String)
- `state` (String)

## Import

Import is supported using the following syntax:

```shell
# In order for the import to work, you should provide a ID composed of the following:
#  {ORG_ID}/{ENV_ID}/{DEPLOYMENT_ID}

terraform import \
  -var-file params.tfvars.json \                  #variables file
  anypoint_cloudhub2_shared_space_deployment.deployment \             #resource name
  aa1f55d6-213d-4f60-845c-201282484cd1/7074fcdd-9b23-4ae3-97e8-5db5f4adf17e/de32fc9d-6b25-4d6f-bd5e-cac32272b2f7    #resource ID
```
