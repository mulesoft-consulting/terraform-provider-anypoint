---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "anypoint_vpn Resource - terraform-provider-anypoint"
subcategory: ""
description: |-
  Creates and manages a `vpn`component.
---

# anypoint_vpn (Resource)

Creates and manages a `vpn`component.

## Example Usage

```terraform
//Values may reference to examples/datasources
//They are referenced the follow way: 
//{dataType}.{name}.{attribute}
resource "anypoint_vpn" "avpn" {
  org_id = anypoint_bg.bg.id
  vpc_id = anypoint_vpc.avpc.id
  name = "myDatacenterVpn"
  remote_asn = 65000
  remote_ip_address = "100.100.100.100"

  tunnel_configs {
    psk = "23847329fn3u__..."
    ptp_cidr = "169.254.12.0/30"
  }

  tunnel_configs {
    psk = "nsdkjfnsauf23f2linf"
    ptp_cidr = "169.254.12.4/30"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the vpn.
- `org_id` (String) The organization id where the vpn is defined.
- `remote_asn` (Number) The unique remote Autonomous System Number
- `remote_ip_address` (String) The remote ip address of the vpn server
- `tunnel_configs` (Block List, Min: 1) The configuration of the vpn tunnel (see [below for nested schema](#nestedblock--tunnel_configs))
- `vpc_id` (String) The vpc id where the vpn is defined.

### Optional

- `local_asn` (Number) The local Autonomous System Number
- `remote_networks` (List of String) The list of remote addresses
- `vpn_tunnels` (Block List) List of vpn tunnels configurations (see [below for nested schema](#nestedblock--vpn_tunnels))

### Read-Only

- `created_at` (String) The vpn creation time
- `failed_reason` (String) The error message if the vpn fails
- `id` (String) The unique id of this vpn generated by the anypoint platform.
- `update_available` (Boolean) Activated if an update is available
- `vpn_connection_status` (String) The status of the vpn connection

<a id="nestedblock--tunnel_configs"></a>
### Nested Schema for `tunnel_configs`

Required:

- `psk` (String) The pre-shared key for authentication
- `ptp_cidr` (String) The peer to peer cidr block

Optional:

- `rekey_fuzz` (Number) The percentage of the rekey window
- `rekey_margin_in_seconds` (Number) The margin time in seconds for rekey process


<a id="nestedblock--vpn_tunnels"></a>
### Nested Schema for `vpn_tunnels`

Required:

- `local_external_ip_address` (String) The tunnel ip address
- `local_ptp_ip_address` (String) The local peer to peer ip address
- `psk` (String) The pre-shared key
- `remote_ptp_ip_address` (String) The remote peer to peer ip address

Optional:

- `accepted_route_count` (Number) The number of acccepted routes

Read-Only:

- `last_status_change` (String) The last status time the status has changed
- `status` (String) The status of this vpn tunnel
- `status_message` (String) The status message of this vpn tunnel

## Import

Import is supported using the following syntax:

```shell
# In order for the import to work, you should provide a ID composed of the following:
#  {ORG_ID}/{VPC_ID}/{VPN_ID}

terraform import \
  -var-file params.tfvars.json \                              #variables file
  anypoint_vpn.vpn01 \                                        #resource name
  aa1f55d6-213d-4f60-845c-201282484cd1/vpc-0aea9f31a049ce288/62a07860f052884d1d129a31  #resource ID
```
